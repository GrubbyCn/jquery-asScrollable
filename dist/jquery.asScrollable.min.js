/*! jQuery asScrollable - v0.1.0 - 2014-12-23
* https://github.com/amazingSurge/jquery-asScrollable
* Copyright (c) 2014 amazingSurge; Licensed GPL */
!function(a,b,c,d,e){"use strict";function f(a){return"string"==typeof a&&-1!=a.indexOf("%")}function g(a){return 0>a?a=0:a>1&&(a=1),100*parseFloat(a).toFixed(4)+"%"}function h(a){return parseFloat(a.slice(0,-1)/100,10)}var i="asScrollable",j=function(){var b,c,d;return c=a.navigator.userAgent,(b=/(?=.+Mac OS X)(?=.+Firefox)/.test(c))?(d=/Firefox\/\d{2}\./.exec(c),d&&(d=d[0].replace(/\D+/g,"")),b&&+d>23):!1}(),k=c[i]=function(a,b){this.$element=c(b),a=this.options=c.extend({},k.defaults,a||{},this.$element.data("options")||{}),this.classes={content:a.namespace+"-content",container:a.namespace+"-container",bar:a.namespace+"-bar",barHide:a.namespace+"-bar-hide",skin:a.skin},this.attributes={vertical:{axis:"Y",overflow:"overflow-y",scroll:"scrollTop",scrollLength:"scrollHeight",pageOffset:"pageYOffset",ffPadding:"padding-right",length:"height",clientLength:"clientHeight",offset:"offsetHeight",crossLength:"width",crossClientLength:"clientWidth",crossOffset:"offsetWidth"},horizontal:{axis:"X",overflow:"overflow-x",scroll:"scrollLeft",scrollLength:"scrollWidth",pageOffset:"pageXOffset",ffPadding:"padding-bottom",length:"width",clientLength:"clientWidth",offset:"offsetWidth",crossLength:"height",crossClientLength:"clientHeight",crossOffset:"offsetHeight"}},this._states={},this.horizontal=null,this.vertical=null,this.$bar=null,this.options.containerSelector?this.$container=this.$element.find(this.options.containerSelector):(this.$container=this.$element.wrap("<div>"),this.$element=this.$container.parent()),this.options.contentSelector?this.$content=this.$container.find(this.options.contentSelector):(this.$content=this.$container.wrap("<div>"),this.$container=this.$content.parent()),this.init()};k.defaults={namespace:"asScrollable",contentSelector:null,containerSelector:null,hoveringClass:"is-hovering",direction:"vertical",showOnHover:!0,showOnBarHover:!1,duration:"500",easing:"swing",responsive:!0,throttle:20,scrollbar:{}},k.prototype={constructor:k,init:function(){switch(this.$element.addClass(this.options.namespace),this.$container.addClass(this.classes.container),this.$content.addClass(this.classes.content),this.options.skin&&this.$element.addClass(this.classes.skin),this.options.direction){case"vertical":this.vertical=!0;break;case"horizontal":this.horizontal=!0;break;case"both":this.horizontal=!0,this.vertical=!0;break;case"auto":var a=this.$content.css("overflow-x"),b=this.$content.css("overflow-y");("scroll"===a||"auto"===a)&&(this.horizontal=!0),("scroll"===b||"auto"===b)&&(this.vertical=!0)}this.$container.css("overflow","hidden"),this.vertical&&(this.initLayout("vertical"),this.createBar("vertical")),this.horizontal&&(this.initLayout("horizontal"),this.createBar("horizontal")),this.bindEvents()},bindEvents:function(){var b=this,d=this.options;this.$element.on(this.eventName("mouseenter"),function(){b.$element.addClass(b.options.hoveringClass),b.enter("hovering"),b.trigger("hover")}),this.$element.on(this.eventName("mouseleave"),function(){b.$element.removeClass(b.options.hoveringClass),b.is("hovering")&&(b.leave("hovering"),b.trigger("hovered"))}),d.showOnHover&&(d.showOnBarHover?this.$bar.on("asScrollbar::hover",function(){b.showBar(this.direction)}).on("asScrollbar::hovered",function(){b.hideBar(this.direction)}):(this.$element.on(i+"::hover",c.proxy(this.showBar,this)),this.$element.on(i+"::hovered",c.proxy(this.hideBar,this)))),this.$container.on(this.eventName("scroll"),function(){if(b.horizontal){var a=b.offsetLeft;b.offsetLeft=b.getOffset("horizontal"),a!==b.offsetLeft&&b.trigger("scroll",b.getPercentOffset("horizontal"),"horizontal")}if(b.vertical){var c=b.offsetTop;b.offsetTop=b.getOffset("vertical"),c!==b.offsetTop&&b.trigger("scroll",b.getPercentOffset("vertical"),"vertical")}}),this.$element.on(i+"::scroll",function(a,b,c,d){var e=b.getBarApi(d);e.moveTo(g(c),!1,!0)}),this.$bar.on("asScrollbar::change",function(a,c,d){b.moveTo(this.direction,g(d),!1,!0)}),d.responsive&&c(a).on(this.eventName("resize"),this.throttle(function(){b.update.call(b)},d.throttle))},trigger:function(a){var b=Array.prototype.slice.call(arguments,1),c=[this].concat(b);this.$element.trigger(i+"::"+a,c),a=a.replace(/\b\w+\b/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)});var d="on"+a;"function"==typeof this.options[d]&&this.options[d].apply(this,b)},is:function(a){return this._states[a]&&this._states[a]>0},enter:function(a){this._states[a]===e&&(this._states[a]=0),this._states[a]++},leave:function(a){this._states[a]--},eventName:function(a){if("string"!=typeof a||""===a)return"."+this.options.namespace;a=a.split(" ");for(var b=a.length,c=0;b>c;c++)a[c]=a[c]+"."+this.options.namespace;return a.join(" ")},throttle:function(a,b){var c,d,e,f=Date.now||function(){return(new Date).getTime()},g=null,h=0,i=function(){h=f(),g=null,e=a.apply(c,d),c=d=null};return function(){var j=f(),k=b-(j-h);return c=this,d=arguments,0>=k?(clearTimeout(g),g=null,h=j,e=a.apply(c,d),c=d=null):g||(g=setTimeout(i,k)),e}},initLayout:function(a){"vertical"===a&&this.$content.css("height",this.$element.height());var b=this.attributes[a],c=this.$container[0];this.$container.css(b.overflow,"scroll");var d=this.getBrowserScrollbarWidth(a);this.$container.css(b.crossLength,d+c.parentNode[b.crossClientLength]+"px"),0===d&&j&&this.$container.css(b.ffPadding,16)},createBar:function(a){var b=c.extend(this.options.scrollbar,{namespace:this.classes.bar,direction:a,useCssTransitions:!1,keyboard:!1}),d=c("<div>");d.asScrollbar(b),this.options.showOnHover&&d.addClass(this.classes.barHide),d.appendTo(this.$element),this["$"+a]=d,this.$bar=null===this.$bar?d:this.$bar.add(d),this.updateBarHandle(a)},getBrowserScrollbarWidth:function(a){var c,d,e=this.attributes[a];return e.scrollbarWidth?e.scrollbarWidth:(c=b.createElement("div"),d=c.style,d.position="absolute",d.width="100px",d.height="100px",d.overflow="scroll",d.top="-9999px",b.body.appendChild(c),e.scrollbarWidth=c[e.offset]-c[e.clientLength],b.body.removeChild(c),e.scrollbarWidth)},getOffset:function(a){var b=this.attributes[a],c=this.$container[0];return c[b.pageOffset]||c[b.scroll]},getPercentOffset:function(a){return this.getOffset(a)/this.getScrollLength(a)},getContainerLength:function(a){return this.$container[0][this.attributes[a].clientLength]},getScrollLength:function(a){var b=this.$content[0][this.attributes[a].scrollLength];return b-this.getContainerLength(a)},moveTo:function(a,b,c,d){var e=typeof b;"string"===e&&(f(b)&&(b=h(b)*this.getScrollLength(a)),b=parseFloat(b),e="number"),"number"===e&&this.move(a,b,c,d)},moveBy:function(a,b,c,d){var e=typeof b;"string"===e&&(f(b)&&(b=h(b)*this.getScrollLength(a)),b=parseFloat(b),e="number"),"number"===e&&this.move(a,this.getOffset(a)+b,c,d)},move:function(a,b,c,d){if(this[a]===!0&&"number"==typeof b){var e=this;this.enter("moving"),0>b?b=0:b>this.getScrollLength(a)&&(b=this.getScrollLength(a)),c!==!1&&this.trigger("change",b/this.getScrollLength(a));var f=this.attributes[a],g=function(){e.leave("moving")};if(d)this.$container[0][f.scroll]=b,g();else{var h={};h[f.scroll]=b,this.$container.stop().animate(h,{duration:this.options.duration,easing:this.options.easing},g)}}},moveXto:function(a,b,c){return this.moveTo("horizontal",a,b,c)},moveYto:function(a,b,c){return this.moveTo("vertical",a,b,c)},moveXby:function(a,b,c){return this.moveBy("horizontal",a,b,c)},moveYby:function(a,b,c){return this.moveBy("vertical",a,b,c)},moveX:function(a,b,c){return this.move("horizontal",a,b,c)},moveY:function(a,b,c){return this.move("vertical",a,b,c)},getBar:function(a){return a&&this["$"+a]?this["$"+a]:this.$bar},getBarApi:function(a){return this.getBar(a).data("asScrollbar")},getBarX:function(){return this.getBar("horizontal")},getBarY:function(){return this.getBar("vertical")},showBar:function(a){this.getBar(a).removeClass(this.classes.barHide)},hideBar:function(a){this.getBar(a).addClass(this.classes.barHide)},update:function(){this.vertical&&(this.initLayout("vertical"),this.updateBarHandle("vertical")),this.horizontal&&(this.initLayout("vertical"),this.updateBarHandle("horizontal"))},updateBarHandle:function(a){var b=this.getBarApi(a),c=this.getScrollLength(a),d=this.getContainerLength(a);c>0?(b.is("disabled")&&b.enable(),b.setHandleLength(b.getBarLength()*d/(c+d))):b.disable()},destory:function(){this.$bar.remove(),this.$element.off(this.eventName()),this.$element.off(i+"::scroll"),this.$container.off(this.eventName())}},c.fn[i]=function(a){if("string"!=typeof a)return this.each(function(){c(this).data(i)?c(this).data(i).reInitLayout():c(this).data(i,new k(a,this))});var b=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=c(this).data(i);return d&&c.isFunction(d[a])&&"_"!==a.charAt(0)?void d[a].apply(d,b):!1}),this}}(window,document,jQuery,function(a){"use strict";return void 0===a.asScrollbar?!1:a.asScrollbar}(jQuery));